{"gherkinDocument":{"feature":{"location":{"line":1,"column":1},"language":"en","keyword":"Feature","name":"Exception in After Block","description":"  In order to use custom assertions at the end of each scenario\n  As a developer\n  I want exceptions raised in After blocks to be handled gracefully and reported by the formatters","children":[{"background":{"id":"3","location":{"line":6,"column":3},"keyword":"Background","steps":[{"location":{"line":7,"column":5},"keyword":"Given ","text":"the standard step definitions","id":"0"},{"location":{"line":8,"column":5},"keyword":"And ","text":"a file named \"features/step_definitions/naughty_steps.rb\" with:","docString":{"location":{"line":9,"column":7},"content":"Given /^this step does something naughty$/ do x=1\n  @naughty = true\nend","delimiter":"\"\"\""},"id":"1"},{"location":{"line":14,"column":5},"keyword":"And ","text":"a file named \"features/support/env.rb\" with:","docString":{"location":{"line":15,"column":7},"content":"class NaughtyScenarioException \u003c Exception; end\nAfter do\n  if @naughty\n    raise NaughtyScenarioException.new(\"This scenario has been very very naughty\")\n  end\nend","delimiter":"\"\"\""},"id":"2"}]}},{"scenario":{"id":"9","tags":[{"location":{"line":24,"column":3},"name":"@spawn","id":"7"},{"location":{"line":24,"column":10},"name":"@todo-windows","id":"8"}],"location":{"line":25,"column":3},"keyword":"Scenario","name":"Handle Exception in standard scenario step and carry on","steps":[{"location":{"line":26,"column":5},"keyword":"Given ","text":"a file named \"features/naughty_step_in_scenario.feature\" with:","docString":{"location":{"line":27,"column":7},"content":"Feature: Sample\n\n  Scenario: Naughty Step\n    Given this step does something naughty\n\n  Scenario: Success\n    Given this step passes","delimiter":"\"\"\""},"id":"4"},{"location":{"line":36,"column":5},"keyword":"When ","text":"I run `cucumber features`","id":"5"},{"location":{"line":37,"column":5},"keyword":"Then ","text":"it should fail with:","docString":{"location":{"line":38,"column":7},"content":"Feature: Sample\n\n  Scenario: Naughty Step                   # features/naughty_step_in_scenario.feature:3\n    Given this step does something naughty # features/step_definitions/naughty_steps.rb:1\n      This scenario has been very very naughty (NaughtyScenarioException)\n      ./features/support/env.rb:4:in `After'\n\n  Scenario: Success        # features/naughty_step_in_scenario.feature:6\n    Given this step passes # features/step_definitions/steps.rb:1\n\nFailing Scenarios:\ncucumber features/naughty_step_in_scenario.feature:3 # Scenario: Naughty Step\n\n2 scenarios (1 failed, 1 passed)\n2 steps (2 passed)\n","delimiter":"\"\"\""},"id":"6"}]}},{"scenario":{"id":"15","tags":[{"location":{"line":57,"column":3},"name":"@spawn","id":"13"},{"location":{"line":57,"column":10},"name":"@todo-windows","id":"14"}],"location":{"line":58,"column":3},"keyword":"Scenario","name":"Handle Exception in scenario outline table row and carry on","steps":[{"location":{"line":59,"column":5},"keyword":"Given ","text":"a file named \"features/naughty_step_in_scenario_outline.feature\" with:","docString":{"location":{"line":60,"column":7},"content":"Feature: Sample\n\n  Scenario Outline: Naughty Step\n    Given this step \u003cMight Work\u003e\n\n    Examples:\n    | Might Work             |\n    | passes                 |\n    | does something naughty |\n    | passes                 |\n\n  Scenario: Success\n    Given this step passes\n","delimiter":"\"\"\""},"id":"10"},{"location":{"line":76,"column":5},"keyword":"When ","text":"I run `cucumber features -q`","id":"11"},{"location":{"line":77,"column":5},"keyword":"Then ","text":"it should fail with:","docString":{"location":{"line":78,"column":7},"content":"Feature: Sample\n\n  Scenario Outline: Naughty Step\n    Given this step \u003cMight Work\u003e\n\n    Examples:\n      | Might Work             |\n      | passes                 |\n      | does something naughty |\n      This scenario has been very very naughty (NaughtyScenarioException)\n      ./features/support/env.rb:4:in `After'\n      | passes                 |\n\n  Scenario: Success\n    Given this step passes\n\nFailing Scenarios:\ncucumber features/naughty_step_in_scenario_outline.feature:9\n\n4 scenarios (1 failed, 3 passed)\n4 steps (4 passed)\n","delimiter":"\"\"\""},"id":"12"}]}},{"scenario":{"id":"20","tags":[{"location":{"line":103,"column":3},"name":"@todo-windows","id":"19"}],"location":{"line":104,"column":3},"keyword":"Scenario","name":"Handle Exception using the progress format","steps":[{"location":{"line":105,"column":5},"keyword":"Given ","text":"a file named \"features/naughty_step_in_scenario.feature\" with:","docString":{"location":{"line":106,"column":7},"content":"Feature: Sample\n\n  Scenario: Naughty Step\n    Given this step does something naughty\n\n  Scenario: Success\n    Given this step passes","delimiter":"\"\"\""},"id":"16"},{"location":{"line":115,"column":5},"keyword":"When ","text":"I run `cucumber features --format progress`","id":"17"},{"location":{"line":116,"column":5},"keyword":"Then ","text":"it should fail with:","docString":{"location":{"line":117,"column":7},"content":".F.\n\nFailing Scenarios:\ncucumber features/naughty_step_in_scenario.feature:3 # Scenario: Naughty Step\n\n2 scenarios (1 failed, 1 passed)\n2 steps (2 passed)\n","delimiter":"\"\"\""},"id":"18"}]}}]},"uri":"/Users/kevinjohnson/projects/ex_gherkin/test/support/testdata/full_features/exception_in_after_hook.feature"}}
