{"gherkinDocument":{"feature":{"location":{"line":1,"column":1},"language":"en","keyword":"Feature","name":"After Hooks","description":"  After hooks can be used to clean up any state you've altered during your\n  scenario, or to check the status of the scenario and act accordingly.\n\n  You can ask a scenario whether it has failed, for example.\n\n  Mind you, even if it hasn't failed yet, you can still make the scenario\n  fail if your After hook throws an error.","children":[{"background":{"id":"1","location":{"line":11,"column":3},"keyword":"Background","steps":[{"location":{"line":12,"column":5},"keyword":"Given ","text":"the standard step definitions","id":"0"}]}},{"scenario":{"id":"11","location":{"line":14,"column":3},"keyword":"Scenario Outline","name":"Retrieve the status of a scenario as a symbol","steps":[{"location":{"line":15,"column":5},"keyword":"Given ","text":"a file named \"features/support/debug_hook.rb\" with:","docString":{"location":{"line":16,"column":7},"content":"After do |scenario|\n  puts scenario.status.inspect\nend","delimiter":"\"\"\""},"id":"2"},{"location":{"line":21,"column":5},"keyword":"And ","text":"a file named \"features/result.feature\" with:","docString":{"location":{"line":22,"column":7},"content":"Feature:\n  Scenario:\n    Given this step \u003cresult\u003e","delimiter":"\"\"\""},"id":"3"},{"location":{"line":27,"column":5},"keyword":"When ","text":"I run `cucumber -f progress`","id":"4"},{"location":{"line":28,"column":5},"keyword":"Then ","text":"the output should contain \"\u003cstatus symbol\u003e\"","id":"5"}],"examples":[{"id":"10","location":{"line":30,"column":5},"keyword":"Examples","tableHeader":{"id":"6","location":{"line":31,"column":7},"cells":[{"location":{"line":31,"column":9},"value":"result"},{"location":{"line":31,"column":22},"value":"status symbol"}]},"tableBody":[{"id":"7","location":{"line":32,"column":7},"cells":[{"location":{"line":32,"column":9},"value":"passes"},{"location":{"line":32,"column":22},"value":":passed"}]},{"id":"8","location":{"line":33,"column":7},"cells":[{"location":{"line":33,"column":9},"value":"fails"},{"location":{"line":33,"column":22},"value":":failed"}]},{"id":"9","location":{"line":34,"column":7},"cells":[{"location":{"line":34,"column":9},"value":"is pending"},{"location":{"line":34,"column":22},"value":":pending"}]}]}]}},{"scenario":{"id":"16","location":{"line":36,"column":3},"keyword":"Scenario","name":"Check the failed status of a scenario in a hook","steps":[{"location":{"line":37,"column":5},"keyword":"Given ","text":"a file named \"features/support/debug_hook.rb\" with:","docString":{"location":{"line":38,"column":7},"content":"After do |scenario|\n  if scenario.failed?\n    puts \"eek\"\n  end\nend","delimiter":"\"\"\""},"id":"12"},{"location":{"line":45,"column":5},"keyword":"And ","text":"a file named \"features/fail.feature\" with:","docString":{"location":{"line":46,"column":7},"content":"Feature:\n  Scenario:\n    Given this step fails","delimiter":"\"\"\""},"id":"13"},{"location":{"line":51,"column":5},"keyword":"When ","text":"I run `cucumber -f progress`","id":"14"},{"location":{"line":52,"column":5},"keyword":"Then ","text":"the output should contain:","docString":{"location":{"line":53,"column":7},"content":"eek","delimiter":"\"\"\""},"id":"15"}]}},{"scenario":{"id":"21","location":{"line":57,"column":3},"keyword":"Scenario","name":"Make a scenario fail from an After hook","steps":[{"location":{"line":58,"column":5},"keyword":"Given ","text":"a file named \"features/support/bad_hook.rb\" with:","docString":{"location":{"line":59,"column":7},"content":"After do\n  fail 'yikes'\nend","delimiter":"\"\"\""},"id":"17"},{"location":{"line":64,"column":5},"keyword":"And ","text":"a file named \"features/pass.feature\" with:","docString":{"location":{"line":65,"column":7},"content":"Feature:\n  Scenario:\n    Given this step passes","delimiter":"\"\"\""},"id":"18"},{"location":{"line":70,"column":5},"keyword":"When ","text":"I run `cucumber -f pretty`","id":"19"},{"location":{"line":71,"column":5},"keyword":"Then ","text":"it should fail with:","docString":{"location":{"line":72,"column":7},"content":"  Scenario:                # features/pass.feature:2\n    Given this step passes # features/step_definitions/steps.rb:1\n      yikes (RuntimeError)\n      ./features/support/bad_hook.rb:2:in `After'","delimiter":"\"\"\""},"id":"20"}]}},{"scenario":{"id":"26","location":{"line":79,"column":3},"keyword":"Scenario","name":"After hooks are executed in reverse order of definition","steps":[{"location":{"line":80,"column":5},"keyword":"Given ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":81,"column":7},"content":"After do\n  puts \"First\"\nend\n\nAfter do\n  puts \"Second\"\nend","delimiter":"\"\"\""},"id":"22"},{"location":{"line":90,"column":5},"keyword":"And ","text":"a file named \"features/pass.feature\" with:","docString":{"location":{"line":91,"column":7},"content":"Feature:\n  Scenario:\n    Given this step passes","delimiter":"\"\"\""},"id":"23"},{"location":{"line":96,"column":5},"keyword":"When ","text":"I run `cucumber -f progress`","id":"24"},{"location":{"line":97,"column":5},"keyword":"Then ","text":"the output should contain:","docString":{"location":{"line":98,"column":7},"content":"Second\n\nFirst","delimiter":"\"\"\""},"id":"25"}]}}]},"uri":"/Users/kevinjohnson/projects/ex_gherkin/test/support/testdata/full_features/after_hooks.feature"}}
