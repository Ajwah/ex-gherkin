{"gherkinDocument":{"feature":{"location":{"line":1,"column":1},"language":"en","keyword":"Feature","name":"Exception in Before Block","description":"  In order to know with confidence that my before blocks have run OK\n  As a developer\n  I want exceptions raised in Before blocks to be handled gracefully and reported by the formatters","children":[{"background":{"id":"2","location":{"line":6,"column":3},"keyword":"Background","steps":[{"location":{"line":7,"column":5},"keyword":"Given ","text":"the standard step definitions","id":"0"},{"location":{"line":8,"column":5},"keyword":"And ","text":"a file named \"features/support/env.rb\" with:","docString":{"location":{"line":9,"column":7},"content":"class SomeSetupException \u003c Exception; end\nclass BadStepException \u003c Exception; end\nBefore do\n  raise SomeSetupException.new(\"I cannot even start this scenario\")\nend","delimiter":"\"\"\""},"id":"1"}]}},{"scenario":{"id":"8","tags":[{"location":{"line":17,"column":3},"name":"@spawn","id":"6"},{"location":{"line":17,"column":10},"name":"@todo-windows","id":"7"}],"location":{"line":18,"column":3},"keyword":"Scenario","name":"Handle Exception in standard scenario step and carry on","steps":[{"location":{"line":19,"column":5},"keyword":"Given ","text":"a file named \"features/naughty_step_in_scenario.feature\" with:","docString":{"location":{"line":20,"column":7},"content":"Feature: Sample\n\n  Scenario: Run a good step\n    Given this step passes","delimiter":"\"\"\""},"id":"3"},{"location":{"line":26,"column":5},"keyword":"When ","text":"I run `cucumber features`","id":"4"},{"location":{"line":27,"column":5},"keyword":"Then ","text":"it should fail with:","docString":{"location":{"line":28,"column":7},"content":"Feature: Sample\n\n  Scenario: Run a good step # features/naughty_step_in_scenario.feature:3\n  I cannot even start this scenario (SomeSetupException)\n  ./features/support/env.rb:4:in `Before'\n    Given this step passes  # features/step_definitions/steps.rb:1\n\nFailing Scenarios:\ncucumber features/naughty_step_in_scenario.feature:3 # Scenario: Run a good step\n\n1 scenario (1 failed)\n1 step (1 skipped)\n","delimiter":"\"\"\""},"id":"5"}]}},{"scenario":{"id":"13","tags":[{"location":{"line":44,"column":3},"name":"@todo-windows","id":"12"}],"location":{"line":45,"column":3},"keyword":"Scenario","name":"Handle Exception in Before hook for Scenario with Background","steps":[{"location":{"line":46,"column":5},"keyword":"Given ","text":"a file named \"features/naughty_step_in_before.feature\" with:","docString":{"location":{"line":47,"column":7},"content":"Feature: Sample\n\n  Background:\n    Given this step passes\n\n  Scenario: Run a good step\n    Given this step passes","delimiter":"\"\"\""},"id":"9"},{"location":{"line":56,"column":5},"keyword":"When ","text":"I run `cucumber features`","id":"10"},{"location":{"line":57,"column":5},"keyword":"Then ","text":"it should fail with exactly:","docString":{"location":{"line":58,"column":7},"content":"Feature: Sample\n\n  Background:              # features/naughty_step_in_before.feature:3\n  I cannot even start this scenario (SomeSetupException)\n  ./features/support/env.rb:4:in `Before'\n    Given this step passes # features/step_definitions/steps.rb:1\n\n  Scenario: Run a good step # features/naughty_step_in_before.feature:6\n    Given this step passes  # features/step_definitions/steps.rb:1\n\nFailing Scenarios:\ncucumber features/naughty_step_in_before.feature:6 # Scenario: Run a good step\n\n1 scenario (1 failed)\n2 steps (2 skipped)\n0m0.012s\n","delimiter":"\"\"\""},"id":"11"}]}},{"scenario":{"id":"18","tags":[{"location":{"line":78,"column":3},"name":"@todo-windows","id":"17"}],"location":{"line":79,"column":3},"keyword":"Scenario","name":"Handle Exception using the progress format","steps":[{"location":{"line":80,"column":5},"keyword":"Given ","text":"a file named \"features/naughty_step_in_scenario.feature\" with:","docString":{"location":{"line":81,"column":7},"content":"Feature: Sample\n\n  Scenario: Run a good step\n    Given this step passes","delimiter":"\"\"\""},"id":"14"},{"location":{"line":87,"column":5},"keyword":"When ","text":"I run `cucumber features --format progress`","id":"15"},{"location":{"line":88,"column":5},"keyword":"Then ","text":"it should fail with:","docString":{"location":{"line":89,"column":7},"content":"F-\n\nFailing Scenarios:\ncucumber features/naughty_step_in_scenario.feature:3 # Scenario: Run a good step\n\n1 scenario (1 failed)\n1 step (1 skipped)\n","delimiter":"\"\"\""},"id":"16"}]}}]},"uri":"/Users/kevinjohnson/projects/ex_gherkin/test/support/testdata/full_features/exceptions_in_before_blocks.feature"}}
