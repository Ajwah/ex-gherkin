{"gherkinDocument":{"feature":{"tags":[{"location":{"line":1,"column":1},"name":"@spawn","id":"42"}],"location":{"line":2,"column":1},"language":"en","keyword":"Feature","name":"Around hooks","description":"  In order to support transactional scenarios for database libraries\n  that provide only a block syntax for transactions, Cucumber should\n  permit definition of Around hooks.","children":[{"scenario":{"id":"6","tags":[{"location":{"line":8,"column":3},"name":"@todo-windows","id":"5"}],"location":{"line":9,"column":3},"keyword":"Scenario","name":"A single Around hook","steps":[{"location":{"line":10,"column":5},"keyword":"Given ","text":"a file named \"features/step_definitions/steps.rb\" with:","docString":{"location":{"line":11,"column":7},"content":"Then /^the hook is called$/ do\n  expect($hook_called).to be true\nend","delimiter":"\"\"\""},"id":"0"},{"location":{"line":16,"column":5},"keyword":"And ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":17,"column":7},"content":"Around do |scenario, block|\n  $hook_called = true\n  block.call\nend","delimiter":"\"\"\""},"id":"1"},{"location":{"line":23,"column":5},"keyword":"And ","text":"a file named \"features/f.feature\" with:","docString":{"location":{"line":24,"column":7},"content":"Feature: Around hooks\n  Scenario: using hook\n    Then the hook is called","delimiter":"\"\"\""},"id":"2"},{"location":{"line":29,"column":5},"keyword":"When ","text":"I run `cucumber features/f.feature`","id":"3"},{"location":{"line":30,"column":5},"keyword":"Then ","text":"it should pass with:","docString":{"location":{"line":31,"column":7},"content":"Feature: Around hooks\n\n  Scenario: using hook      # features/f.feature:2\n    Then the hook is called # features/step_definitions/steps.rb:1\n\n1 scenario (1 passed)\n1 step (1 passed)\n","delimiter":"\"\"\""},"id":"4"}]}},{"scenario":{"id":"13","tags":[{"location":{"line":42,"column":3},"name":"@todo-windows","id":"12"}],"location":{"line":43,"column":3},"keyword":"Scenario","name":"Multiple Around hooks","steps":[{"location":{"line":44,"column":5},"keyword":"Given ","text":"a file named \"features/step_definitions/steps.rb\" with:","docString":{"location":{"line":45,"column":7},"content":"Then /^the hooks are called in the correct order$/ do\n  expect($hooks_called).to eq ['A', 'B', 'C']\nend","delimiter":"\"\"\""},"id":"7"},{"location":{"line":50,"column":5},"keyword":"And ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":51,"column":7},"content":"Around do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'A'\n  block.call\nend\n\nAround do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'B'\n  block.call\nend\n\nAround do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'C'\n  block.call\nend","delimiter":"\"\"\""},"id":"8"},{"location":{"line":70,"column":5},"keyword":"And ","text":"a file named \"features/f.feature\" with:","docString":{"location":{"line":71,"column":7},"content":"Feature: Around hooks\n  Scenario: using multiple hooks\n    Then the hooks are called in the correct order","delimiter":"\"\"\""},"id":"9"},{"location":{"line":76,"column":5},"keyword":"When ","text":"I run `cucumber features/f.feature`","id":"10"},{"location":{"line":77,"column":5},"keyword":"Then ","text":"it should pass with:","docString":{"location":{"line":78,"column":7},"content":"Feature: Around hooks\n\n  Scenario: using multiple hooks                   # features/f.feature:2\n    Then the hooks are called in the correct order # features/step_definitions/steps.rb:1\n\n1 scenario (1 passed)\n1 step (1 passed)\n","delimiter":"\"\"\""},"id":"11"}]}},{"scenario":{"id":"20","tags":[{"location":{"line":89,"column":3},"name":"@todo-windows","id":"19"}],"location":{"line":90,"column":3},"keyword":"Scenario","name":"Mixing Around, Before, and After hooks","steps":[{"location":{"line":91,"column":5},"keyword":"Given ","text":"a file named \"features/step_definitions/steps.rb\" with:","docString":{"location":{"line":92,"column":7},"content":"Then /^the Around hook is called around Before and After hooks$/ do\n  expect($hooks_called).to eq ['Around', 'Before']\nend","delimiter":"\"\"\""},"id":"14"},{"location":{"line":97,"column":5},"keyword":"And ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":98,"column":7},"content":"Around do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'Around'\n  block.call\n  $hooks_called \u003c\u003c 'Around'\n  $hooks_called.should == ['Around', 'Before', 'After', 'Around'] #TODO: Find out why this fails using the new rspec expect syntax.\nend\n\nBefore do |scenario|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'Before'\nend\n\nAfter do |scenario|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'After'\n  expect($hooks_called).to eq ['Around', 'Before', 'After']\nend","delimiter":"\"\"\""},"id":"15"},{"location":{"line":118,"column":5},"keyword":"And ","text":"a file named \"features/f.feature\" with:","docString":{"location":{"line":119,"column":7},"content":"Feature: Around hooks\n  Scenario: Mixing Around, Before, and After hooks\n    Then the Around hook is called around Before and After hooks","delimiter":"\"\"\""},"id":"16"},{"location":{"line":124,"column":5},"keyword":"When ","text":"I run `cucumber features/f.feature`","id":"17"},{"location":{"line":125,"column":5},"keyword":"Then ","text":"it should pass with:","docString":{"location":{"line":126,"column":7},"content":"Feature: Around hooks\n\n  Scenario: Mixing Around, Before, and After hooks               # features/f.feature:2\n    Then the Around hook is called around Before and After hooks # features/step_definitions/steps.rb:1\n\n1 scenario (1 passed)\n1 step (1 passed)\n","delimiter":"\"\"\""},"id":"18"}]}},{"scenario":{"id":"27","tags":[{"location":{"line":137,"column":3},"name":"@todo-windows","id":"26"}],"location":{"line":138,"column":3},"keyword":"Scenario","name":"Around hooks with tags","steps":[{"location":{"line":139,"column":5},"keyword":"Given ","text":"a file named \"features/step_definitions/steps.rb\" with:","docString":{"location":{"line":140,"column":7},"content":"Then /^the Around hooks with matching tags are called$/ do\n  expect($hooks_called).to eq ['one', 'one or two']\nend","delimiter":"\"\"\""},"id":"21"},{"location":{"line":145,"column":5},"keyword":"And ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":146,"column":7},"content":"Around('@one') do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'one'\n  block.call\nend\n\nAround('@one,@two') do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'one or two'\n  block.call\nend\n\nAround('@one', '@two') do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'one and two'\n  block.call\nend\n\nAround('@two') do |scenario, block|\n  $hooks_called ||= []\n  $hooks_called \u003c\u003c 'two'\n  block.call\nend","delimiter":"\"\"\""},"id":"22"},{"location":{"line":171,"column":5},"keyword":"And ","text":"a file named \"features/f.feature\" with:","docString":{"location":{"line":172,"column":7},"content":"Feature: Around hooks\n  @one\n  Scenario: Around hooks with tags\n    Then the Around hooks with matching tags are called","delimiter":"\"\"\""},"id":"23"},{"location":{"line":178,"column":5},"keyword":"When ","text":"I run `cucumber -q -t @one features/f.feature`","id":"24"},{"location":{"line":179,"column":5},"keyword":"Then ","text":"it should pass with:","docString":{"location":{"line":180,"column":7},"content":"Feature: Around hooks\n\n  @one\n  Scenario: Around hooks with tags\n    Then the Around hooks with matching tags are called\n\n1 scenario (1 passed)\n1 step (1 passed)\n","delimiter":"\"\"\""},"id":"25"}]}},{"scenario":{"id":"34","tags":[{"location":{"line":192,"column":3},"name":"@todo-windows","id":"33"}],"location":{"line":193,"column":3},"keyword":"Scenario","name":"Around hooks with scenario outlines","steps":[{"location":{"line":194,"column":5},"keyword":"Given ","text":"a file named \"features/step_definitions/steps.rb\" with:","docString":{"location":{"line":195,"column":7},"content":"Then /^the hook is called$/ do\n  expect($hook_called).to be true\nend","delimiter":"\"\"\""},"id":"28"},{"location":{"line":200,"column":5},"keyword":"And ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":201,"column":7},"content":"Around do |scenario, block|\n  $hook_called = true\n  block.call\nend","delimiter":"\"\"\""},"id":"29"},{"location":{"line":207,"column":5},"keyword":"And ","text":"a file named \"features/f.feature\" with:","docString":{"location":{"line":208,"column":7},"content":"Feature: Around hooks with scenario outlines\n  Scenario Outline: using hook\n    Then the hook is called\n\n    Examples:\n      | Number |\n      | one    |\n      | two    |","delimiter":"\"\"\""},"id":"30"},{"location":{"line":218,"column":5},"keyword":"When ","text":"I run `cucumber features/f.feature`","id":"31"},{"location":{"line":219,"column":5},"keyword":"Then ","text":"it should pass with:","docString":{"location":{"line":220,"column":7},"content":"Feature: Around hooks with scenario outlines\n\n  Scenario Outline: using hook # features/f.feature:2\n    Then the hook is called    # features/f.feature:3\n\n    Examples:\n      | Number |\n      | one    |\n      | two    |\n\n2 scenarios (2 passed)\n2 steps (2 passed)\n","delimiter":"\"\"\""},"id":"32"}]}},{"scenario":{"id":"41","tags":[{"location":{"line":236,"column":3},"name":"@todo-windows","id":"40"}],"location":{"line":237,"column":3},"keyword":"Scenario","name":"Around Hooks and the Custom World","steps":[{"location":{"line":238,"column":5},"keyword":"Given ","text":"a file named \"features/step_definitions/steps.rb\" with:","docString":{"location":{"line":239,"column":7},"content":"Then /^the world should be available in the hook$/ do\n  $previous_world = self\n  expect($hook_world).to eq(self)\nend\n\nThen /^what$/ do\n  expect($hook_world).not_to eq($previous_world)\nend","delimiter":"\"\"\""},"id":"35"},{"location":{"line":249,"column":5},"keyword":"And ","text":"a file named \"features/support/hooks.rb\" with:","docString":{"location":{"line":250,"column":7},"content":"Around do |scenario, block|\n  $hook_world = self\n  block.call\nend","delimiter":"\"\"\""},"id":"36"},{"location":{"line":256,"column":5},"keyword":"And ","text":"a file named \"features/f.feature\" with:","docString":{"location":{"line":257,"column":7},"content":"Feature: Around hooks\n  Scenario: using hook\n    Then the world should be available in the hook\n\n  Scenario: using the same hook\n    Then what","delimiter":"\"\"\""},"id":"37"},{"location":{"line":265,"column":5},"keyword":"When ","text":"I run `cucumber features/f.feature`","id":"38"},{"location":{"line":266,"column":5},"keyword":"Then ","text":"it should pass","id":"39"}]}}]},"uri":"/Users/kevinjohnson/projects/ex_gherkin/test/support/testdata/full_features/around_hooks.feature"}}
